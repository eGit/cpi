#summary The CPI Online as an example of Gap Data
#labels Featured

 The CPI Online [http://code.google.com/p/cpi/source/browse/trunk/server server] uses the [http://gap-data.googlecode.com/ Gap Data] software framework.

= Gap Data Bean =

 A bean represents the storage and caching and application I/O for a record in a relational database table.  It communicates with the Datastore and Memcache, and implements HTTP and XMPP applications with GAE.

 The Gap Data compiler generates java programming language source code for Google App Engine data beans.  The Gap Data Bean is defined in ODL.  

== Person ==

 This application redefines [http://code.google.com/p/cpi/source/browse/trunk/server/odl/oso/data/Person.odl Person] from [http://code.google.com/p/gap-data/source/browse/trunk/gae/odl/oso/data/Person.odl gap-data].
{{{
package oso.data;
path /people;
import cpi.Inventory;
import cpi.groups.Project;

/**
 * Accept Accounts or OAuth Logon Id for viewer identity
 * 
 * Application access by random identifier
 * 
 * Logon Id is optional with Project and identifier
 * 
 * @review(Identifier,Random)
 */
class Person version 8 {
    String logonId;
    *unique String identifier;
    List.Primitive<Inventory> inventory;
    Float nf;
    Float nt;
    Float st;
    Float sf;
    Date created;
    Date completed;
    Project project;
}
}}}

 Person is used by Gap Data for any logged- in user

 A Person with a Project may not have a logonId

 See also [API_Result API Result]

== Group ==

{{{
package cpi.groups;
path /groups;
import oso.data.Person;

/**
 * A [http://code.google.com/p/cpi/source/browse/trunk/server/odl/cpi/groups/Group.odl Group] has many [http://code.google.com/p/cpi/source/browse/trunk/server/odl/cpi/groups/Project.odl Projects]
 * 
 * Accept logon member of scope for name.
 * 
 * Access OAuth random identifier
 */
class Group version 1 {
    *unique String name;
    unique String identifier;
    Person owner;
    Person admin;
    Date created;
    Date cleaned;
    /*
     * If not Project, use Group
     */
    Redirect redirect;
}
}}}

 See also [API_Group API Group]

 
== Project ==

{{{
package cpi.groups;
path /projects;
import oso.data.Person;

/**
 * A [http://code.google.com/p/cpi/source/browse/trunk/server/odl/cpi/groups/Group.odl Group] has many [http://code.google.com/p/cpi/source/browse/trunk/server/odl/cpi/groups/Project.odl Projects]
 * 
 * Accept logon member of scope for name.
 * 
 * Access OAuth random identifier.
 */
class Project version 1 {
    unique String name;
    *String identifier;
    /*
     * Parent group
     */
    Group group;
    /* 
     * Could add (Person admin) for delegation
     */
    Date created;
    Date cleaned;
    /*
     * Quota on query Person.project = Project.identifier
     */
    Integer count;
    /*
     * If not Project, use Group
     */
    Redirect redirect;
}
}}}

 See also [API_Project API Project]

 