#summary The CPI Online as an example of Gap Data
#labels Featured

 The CPI Online [http://code.google.com/p/cpi/source/browse/trunk/server server] uses the [http://gap-data.googlecode.com/ Gap Data] software framework.

= Gap Data Bean =

 A bean represents the storage and caching and application I/O for a record in a relational database table.  It communicates with the Datastore and Memcache, and implements HTTP and XMPP applications with GAE.

 The Gap Data compiler generates java programming language source code for Google App Engine data beans.  The Gap Data Bean is defined in ODL.  

== Person ==

 The CPI Online redefines [http://code.google.com/p/cpi/source/browse/trunk/server/odl/oso/data/Person.odl Person] (from [http://code.google.com/p/gap-data/source/browse/trunk/gae/odl/oso/data/Person.odl gap-data]) to implement the principal data table.  
{{{
package oso.data;
path /people;
import cpi.Inventory;
import cpi.groups.Group;
import cpi.groups.Project;

/**
 * Accept Accounts or OAuth Logon Id for viewer identity
 * 
 * Application access by random identifier
 * 
 * @review(Identifier,Random)
 */
class Person version 8 {
    *unique String logonId;
    *unique String identifier;
    List.Primitive<Inventory> inventory;
    Float nf;
    Float nt;
    Float st;
    Float sf;
    Date created;
    Date completed;
    Group group;
    Project admin;
}
}}}

 Person is used by Gap Data for any logged- in user.  The Google Accounts service provides a reusable storage root identity for the CPI Online data store.

== Group ==

 A Person may have membership in one [http://code.google.com/p/cpi/source/browse/trunk/server/odl/cpi/groups/Group.odl Group].
{{{
package cpi.groups;
path /groups;
import oso.data.Person;

/**
 * Accept only random identifier for application access.
 */
class Group version 1 {
    String name;
    *unique String identifier;
    Person owner;
    Date created;
    Date modified;
}
}}}

== Project ==

 A Person may have membership in one [http://code.google.com/p/cpi/source/browse/trunk/server/odl/cpi/groups/Project.odl Project].
{{{
package cpi.groups;
path /groups;
import oso.data.Person;

/**
 * Name is unique for lookups, random identifier is 
 * the public parameter key.
 * 
 * Accept name for logon member of scope.
 * 
 * Accept identifier for OAuth access.
 */
class Project version 1 {
    *unique String name;
    *unique String identifier;
    Person owner;
    Date created;
    Date cleaned;
}
}}}

 A Project is created by the service administrator.
 